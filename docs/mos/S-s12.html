<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Chapter 12: Command Line Interpreter (star commands)</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Carousel.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Popups.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script>
function togglePopup(material_id) {
  var popup = document.getElementById(material_id);
  popup.classList.toggle("show");
}
</script>

<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/ACME-Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<p>BBC Computer 32K</p>
<h1>*CAT</h1>
<ul><li><a href="../index.html">&#x21A9; home</a></li><li><a href="index.html"><span class="selectedlink">contents</span></a></li>
<li><a href="S-s1.html">introduction</a></li>
<li><a href="S-s2.html">constants</a></li>
<li><a href="S-s3.html">memory-mapped i/o</a></li>
<li><a href="S-s4.html"><b>$C000</b>: chapter 4</a></li>
<li><a href="S-s5.html"><b>$C4C0</b>: chapter 5</a></li>
<li><a href="S-s6.html"><b>$CB1D</b>: chapter 6</a></li>
<li><a href="S-s7.html"><b>$CCF8</b>: chapter 7</a></li>
<li><a href="S-s8.html"><b>$D060</b>: chapter 8</a></li>
<li><a href="S-s9.html"><b>$D7C2</b>: chapter 9</a></li>
<li><a href="S-s10.html"><b>$D940</b>: chapter 10</a></li>
<li><a href="S-s11.html"><b>$DC1C</b>: chapter 11</a></li>
<li><span class="unlink"><b>$DEC5</b>: chapter 12</span></li>
<li><a href="S-s13.html"><b>$E0A4</b>: chapter 13</a></li>
<li><a href="S-s14.html"><b>$E20E</b>: chapter 14</a></li>
<li><a href="S-s15.html"><b>$E5B3</b>: chapter 15</a></li>
<li><a href="S-s16.html"><b>$EB03</b>: chapter 16</a></li>
<li><a href="S-s17.html"><b>$EEDA</b>: chapter 17</a></li>
<li><a href="S-s18.html"><b>$F135</b>: chapter 18</a></li>
<li><a href="S-s19.html"><b>$F588</b>: chapter 19</a></li>
<li><a href="S-s20.html"><b>$F8A9</b>: chapter 20</a></li>
<li><a href="S-s21.html"><b>$FAE8</b>: chapter 21</a></li>
<li><a href="S-s22.html"><b>$FC00</b>: chapter 22</a></li>
<li><a href="S-s23.html"><b>$FF00</b>: chapter 23</a></li>
<li><a href="S-s24.html"><b>$FFA7</b>: chapter 24</a></li>
<li><a href="S-s25.html">appendix</a></li>
<li><a href="S-s26.html">index</a></li>

</ul>
		</nav>
		<main role="main">
		<!--Weave of 'Chapter 12: Command Line Interpreter (star commands)' generated by Inweb-->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="index.html">MOS 1.20</a></li><li><b>Chapter 12: Command Line Interpreter (star commands)</b></li></ul></div>
<p class="purpose">OSBYTE 127, 139; OSRDCH entry point; OSCLI Handler; Table of star commands; *BASIC; Reading hex values from strings; Copyright string (backwards) - 479 bytes (2.9%)</p>

<ul class="toc"><li><a href="S-s12.html#SP1">&#167;1. Introduction</a></li><li><a href="S-s12.html#SP2">&#167;2. OSRDCH - Read a character</a></li><li><a href="S-s12.html#SP3">&#167;3. Copyright string</a></li><li><a href="S-s12.html#SP4">&#167;4. Star command table</a></li><li><a href="S-s12.html#SP5">&#167;5. OSCLI - Command Line Interpreter</a></li><li><a href="S-s12.html#SP6">&#167;6. Start looking for command</a></li><li><a href="S-s12.html#SP7">&#167;7. Compare character in A in a star command</a></li><li><a href="S-s12.html#SP8">&#167;8. endOfCommandStringFound</a></li><li><a href="S-s12.html#SP9">&#167;9. prepareRegistersForStarCommand</a></li><li><a href="S-s12.html#SP10">&#167;10. Convert string input pointer to XY</a></li><li><a href="S-s12.html#SP11">&#167;11. Convert string address to XY</a></li><li><a href="S-s12.html#SP12">&#167;12. *BASIC</a></li><li><a href="S-s12.html#SP13">&#167;13. Pass command to ROMs</a></li><li><a href="S-s12.html#SP14">&#167;14. OSBYTE 139 - Select file options (*OPT)</a></li><li><a href="S-s12.html#SP15">&#167;15. OSBYTE 127 - Check for EOF on open file</a></li><li><a href="S-s12.html#SP16">&#167;16. Skip spaces</a></li><li><a href="S-s12.html#SP17">&#167;17. Skip spaces and comma</a></li><li><a href="S-s12.html#SP18">&#167;18. Read a number (0-255) from string</a></li><li><a href="S-s12.html#SP19">&#167;19. finishedParsingDigits</a></li><li><a href="S-s12.html#SP20">&#167;20. readNextDigitFromString</a></li><li><a href="S-s12.html#SP21">&#167;21. notAHexByte</a></li><li><a href="S-s12.html#SP22">&#167;22. Read hex digit</a></li></ul><hr class="tocbar">

<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a><b>&#167;1. Introduction. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> The Command Line Interpreter is responsible for executing star commands. There are a number</span>
<span class="ACME-plain-syntax"> built in to the system (see .</span><a href="S-s12.html#SP4" class="internal">starCommandTable</a><span class="ACME-plain-syntax">), and more can be added via paged ROMs.</span>

<span class="ACME-plain-syntax"> The commands can have parameters as integer decimal, hexadecimal values, and strings.</span>
<span class="ACME-plain-syntax"> These commands have characters in the range 32-126, but can encode control codes and other</span>
<span class="ACME-plain-syntax"> non-printable characters. It uses GSINIT and GSREAD to convert the set of ASCII printable</span>
<span class="ACME-plain-syntax"> string characters into a full 8-bit ASCII converted values. See .</span><a href="S-s15.html#SP62" class="internal">gsinitEntryPoint</a><span class="ACME-plain-syntax"> .</span>

<span class="ACME-plain-syntax"> This chapter contains integer (in string form) to byte conversion,</span>
<span class="ACME-plain-syntax"> see .</span><a href="S-s12.html#SP18" class="internal">parseDecimalNumberFromString</a><span class="ACME-plain-syntax">. A conversion for a hex digit in string form to a byte,</span>
<span class="ACME-plain-syntax"> see .</span><a href="S-s12.html#SP22" class="internal">readHexDigit</a><span class="ACME-plain-syntax">, which is used to read a wole 32 bit address, see .</span><a href="S-s14.html#SP9" class="internal">readOSFILEAddress</a><span class="ACME-plain-syntax"> .</span>

<span class="ACME-plain-syntax"> Historical note: Every Acorn computer from the System 2 onwards has a CLI, and the</span>
<span class="ACME-plain-syntax"> asterisk probably derives from the System 2's use of it as a prompt character.</span>
</pre>
<p class="commentary firstcommentary"><a id="SP2" class="paragraph-anchor"></a><b>&#167;2. OSRDCH - Read a character. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">       This reads from an EXEC file if open, or the current input buffer otherwise</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">       A = 0 for reading a key instantly</span>
<span class="ACME-plain-syntax">       A = 255 for reading a key with a time limit</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">osrdchEntryPoint</span><button class="popup" onclick="togglePopup('usagePopup1')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup1">Usage of <span class="code-font"><span class="ACME-function-syntax">osrdchEntryPoint</span></span>:<br/>Chapter 10: Resets - <a href="S-s10.html#SP1">&#167;1</a><br/>Chapter 24: OS entry points; Tube; FRED; JIM; SHEILA - <a href="S-s24.html#SP6">&#167;6</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $dec5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">readCharacterTimed</span><button class="popup" onclick="togglePopup('usagePopup2')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup2">Usage of <span class="code-font"><span class="ACME-function-syntax">readCharacterTimed</span></span>:<br/>Chapter 11: Interrupt processing - <a href="S-s11.html#SP24">&#167;24</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $dec7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">readCharacterTimedFlag</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">store A (0 or 255) to indicate if</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">it's a timed read</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} store X and Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP14" class="function-link"><span class="ACME-function-syntax">execFileHandle</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">get *EXEC file handle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP2" class="function-link"><span class="ACME-function-syntax">readCharacterFromCurrentInputBufferLoop</span></a><span class="ACME-plain-syntax">        </span><span class="ACME-comment-syntax">if (zero, i.e. no EXEC file open)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">read from an EXEC file</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">set carry</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROR</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">tapeCritical</span></a><span class="ACME-plain-syntax">                                   </span><span class="ACME-comment-syntax">set bit 7 of tape filing system</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">active flag to prevent clashes</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s24.html#SP6" class="function-link"><span class="ACME-function-syntax">OSBGET</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">get a byte from the file</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHP</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">push flags to preserve carry</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">tapeCritical</span></a><span class="ACME-plain-syntax">                                   </span><span class="ACME-comment-syntax">clear .tapeCritical flag</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLP</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">get back flags</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP2" class="function-link"><span class="ACME-function-syntax">pullAndReturn</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">if (character found) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(recall values and exit)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">error reading from file, so close</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the file</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP14" class="function-link"><span class="ACME-function-syntax">execFileHandle</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">store it in exec file handle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s24.html#SP6" class="function-link"><span class="ACME-function-syntax">OSFIND</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">and close file via OSFIND</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">readCharacterFromCurrentInputBufferLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $dee6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BIT</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">escapeFlag</span></a><span class="ACME-plain-syntax">                                     </span><span class="ACME-comment-syntax">check ESCAPE flag</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP2" class="function-link"><span class="ACME-function-syntax">setEscapeConditionAndExit</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">if (ESCAPE flag set) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(set escape condition and exit)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP14" class="function-link"><span class="ACME-function-syntax">currentInputBuffer</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">get current input buffer number</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP34" class="function-link"><span class="ACME-function-syntax">readFromEconetOrSoftKeyOrInputBufferA</span></a><span class="ACME-plain-syntax">          </span><span class="ACME-comment-syntax">get a byte from current input buffer</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP2" class="function-link"><span class="ACME-function-syntax">pullAndReturn</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">if (valid character found) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch (exit)</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">checkForTiming</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $def2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BIT</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">readCharacterTimedFlag</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">check for timed read</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BVC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP2" class="function-link"><span class="ACME-function-syntax">readCharacterFromCurrentInputBufferLoop</span></a><span class="ACME-plain-syntax">        </span><span class="ACME-comment-syntax">if (this is not timed) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(go back and read byte from input</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">buffer again)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP14" class="function-link"><span class="ACME-function-syntax">inkeyTimeoutCounterLow</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">check timers</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP14" class="function-link"><span class="ACME-function-syntax">inkeyTimeoutCounterHigh</span></a><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP2" class="function-link"><span class="ACME-function-syntax">readCharacterFromCurrentInputBufferLoop</span></a><span class="ACME-plain-syntax">        </span><span class="ACME-comment-syntax">if (timer is not zero) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(loop back and keep trying to read)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (timed out) then branch (exit</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">without storing character read)</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">setEscapeConditionAndExit</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $df00</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charESCAPE</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">ESCAPE character read</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">pullAndReturn</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $df03</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">readCharacterTimedFlag</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">remember character read</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} restore X,Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">readCharacterTimedFlag</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">recall character read</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP3" class="paragraph-anchor"></a><b>&#167;3. Copyright string. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Only used as part of the check for valid Paged ROM, never printed</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">copyrightString</span><button class="popup" onclick="togglePopup('usagePopup3')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup3">Usage of <span class="code-font"><span class="ACME-function-syntax">copyrightString</span></span>:<br/>Chapter 10: Resets - <a href="S-s10.html#SP15">&#167;15</a><br/>Chapter 16: Sound and Speech - <a href="S-s16.html#SP19">&#167;19</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $df0c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">")C("</span><span class="ACME-plain-syntax">,0                                       </span><span class="ACME-comment-syntax">Copyright string (backwards)</span>
</pre>
<p class="commentary firstcommentary"><a id="SP4" class="paragraph-anchor"></a><b>&#167;4. Star command table. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> *. &lt;directory&gt;                Synonym of *CAT</span>
<span class="ACME-plain-syntax"> *FX &lt;a&gt;,&lt;x&gt;,&lt;y&gt;               Calls OSBYTE</span>
<span class="ACME-plain-syntax"> *BASIC                        Start BASIC</span>
<span class="ACME-plain-syntax"> *CAT &lt;directory&gt;              Show catalogue from filing system</span>
<span class="ACME-plain-syntax"> *CODE &lt;x&gt;,&lt;y&gt;                 Execute code via USERV with A=0</span>
<span class="ACME-plain-syntax"> *EXEC &lt;filename&gt;              Execute a script file</span>
<span class="ACME-plain-syntax"> *HELP &lt;string&gt;                Get help</span>
<span class="ACME-plain-syntax"> *KEY &lt;n&gt; &lt;string&gt;             Define a soft key definition</span>
<span class="ACME-plain-syntax"> *LINE &lt;string&gt;                Execute code via USERV with A=1</span>
<span class="ACME-plain-syntax"> *LOAD &lt;filename&gt; &lt;addr&gt;       Load file</span>
<span class="ACME-plain-syntax"> *MOTOR &lt;n&gt;                    Turn on/off cassette motor</span>
<span class="ACME-plain-syntax"> *OPT &lt;x&gt;,&lt;y&gt;                  Set filing system options (Equivalent to OSBYTE 139)</span>
<span class="ACME-plain-syntax"> *RUN &lt;filename&gt;               Load and execute a file from the current filing system</span>
<span class="ACME-plain-syntax"> *ROM                          Set ROM filing system</span>
<span class="ACME-plain-syntax"> *SAVE &lt;filename&gt; &lt;start&gt; &lt;end&gt; &lt;exec&gt; &lt;load&gt; Save memory to the current filing system</span>
<span class="ACME-plain-syntax"> *SPOOL &lt;filename&gt;             Save keystrokes to the current filing system</span>
<span class="ACME-plain-syntax"> *TAPE &lt;n&gt;                     Set the TAPE filing system</span>
<span class="ACME-plain-syntax"> *TV &lt;x&gt;,&lt;y&gt;                   Adjust the TV display</span>

<span class="ACME-plain-syntax"> Commands can be abbreviated, e.g. *M. for *MOTOR.</span>

<span class="ACME-plain-syntax"> This list is not quite alphabetical, so that short abbreviations yield the more common</span>
<span class="ACME-plain-syntax"> commands, so *LOAD comes before *LINE so that *L. becomes *LOAD; and *R. becomes *RUN,</span>
<span class="ACME-plain-syntax"> not *ROM.</span>

<span class="ACME-plain-syntax"> The last entry is empty to catch anything else.</span>

<span class="ACME-plain-syntax"> After the name and address of each command is a single byte parameter that is passed in</span>
<span class="ACME-plain-syntax"> the accumulator before calling the routine's address. If the parameter has the top bit</span>
<span class="ACME-plain-syntax"> clear (*.; *BASIC; *CAT; *EXEC; *LOAD; *LINE; *RUN; *SAVE; *SPOOL), then the next part of</span>
<span class="ACME-plain-syntax"> the command line is decoded into a string (usually a pathname).</span>

<span class="ACME-plain-syntax"> A group of commands (*CODE; *MOTOR; *OPT; *TAPE; *ROM; *TV) are synonyms for *FX calls</span>
<span class="ACME-plain-syntax"> with the parameter being the OSBYTE number.</span>

<span class="ACME-plain-syntax"> Historical note: The Acorn System 2 star commands were *BASIC, *CAT, *LOAD, *SAVE, *GO,</span>
<span class="ACME-plain-syntax"> *RUN, *MEM, *MON, *NOMON, *DRIVE, *USE, and *FLOAD, while the Atom provided *CAT, *LOAD,</span>
<span class="ACME-plain-syntax"> *SAVE, *RUN, *MON, *NOMON, *FLOAD, and *DOS. Their CLIs each provide the dot abbreviation</span>
<span class="ACME-plain-syntax"> and have similar command-parsing code. But the System 2 and Atom monitors lack the ability</span>
<span class="ACME-plain-syntax"> to EXEC scripts, and have no comment notation. *FLOAD, "finish loading", allowed part of</span>
<span class="ACME-plain-syntax"> a file to be loaded into memory by ignoring its block numbers -- an ability which was,</span>
<span class="ACME-plain-syntax"> perhaps wisely, dropped from the BBC.</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">starCommandTable</span><button class="popup" onclick="togglePopup('usagePopup4')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup4">Usage of <span class="code-font"><span class="ACME-function-syntax">starCommandTable</span></span>:<br/><a href="S-s12.html#SP7">&#167;7</a>, <a href="S-s12.html#SP8">&#167;8</a>, <a href="S-s12.html#SP9">&#167;9</a>, <a href="S-s12.html#SP10">&#167;10</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $df10</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"."</span><span class="ACME-plain-syntax">                                           </span><span class="ACME-comment-syntax">command name</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP13" class="function-link"><span class="ACME-function-syntax">passToCurrentFilingSystem</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">address of routine to call</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">5</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">parameter to routine (in A)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"FX"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP13" class="function-link"><span class="ACME-function-syntax">fxEntryPoint</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$FF</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"BASIC"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP12" class="function-link"><span class="ACME-function-syntax">basicEntryPoint</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">0</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"CAT"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP13" class="function-link"><span class="ACME-function-syntax">passToCurrentFilingSystem</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">5</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"CODE"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP14" class="function-link"><span class="ACME-function-syntax">starCommandsForSpecificOSBYTEs</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$88</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"EXEC"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s19.html#SP11" class="function-link"><span class="ACME-function-syntax">closeAndOptionallyOpenANewEXECFile</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">0</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"HELP"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP30" class="function-link"><span class="ACME-function-syntax">starHelp</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$FF</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"KEY"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP12" class="function-link"><span class="ACME-function-syntax">starKey</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$FF</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"LOAD"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP3" class="function-link"><span class="ACME-function-syntax">starLoad</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">0</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"LINE"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s15.html#SP3" class="function-link"><span class="ACME-function-syntax">uservJumper</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"MOTOR"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP14" class="function-link"><span class="ACME-function-syntax">starCommandsForSpecificOSBYTEs</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$89</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"OPT"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP14" class="function-link"><span class="ACME-function-syntax">starCommandsForSpecificOSBYTEs</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$8B</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"RUN"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP13" class="function-link"><span class="ACME-function-syntax">passToCurrentFilingSystem</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">4</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"ROM"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP14" class="function-link"><span class="ACME-function-syntax">starCommandsForSpecificOSBYTEs</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$8D</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"SAVE"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP4" class="function-link"><span class="ACME-function-syntax">starLoadSave</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">0</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"SPOOL"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP7" class="function-link"><span class="ACME-function-syntax">starSpool</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">0</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"TAPE"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP14" class="function-link"><span class="ACME-function-syntax">starCommandsForSpecificOSBYTEs</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$8C</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"TV"</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP14" class="function-link"><span class="ACME-function-syntax">starCommandsForSpecificOSBYTEs</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$90</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">""</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!be16</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP13" class="function-link"><span class="ACME-function-syntax">passToCurrentFilingSystem</span></a>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">0</span>
</pre>
<p class="commentary firstcommentary"><a id="SP5" class="paragraph-anchor"></a><b>&#167;5. OSCLI - Command Line Interpreter. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">       the default handler for CLIV vector</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">       XY is the address of the command line (terminated with a carriage return)</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">       A,X,Y,Flags undefined</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">oscliEntryPoint</span><button class="popup" onclick="togglePopup('usagePopup5')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup5">Usage of <span class="code-font"><span class="ACME-function-syntax">oscliEntryPoint</span></span>:<br/>Chapter 10: Resets - <a href="S-s10.html#SP1">&#167;1</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $df89</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">stringInputBufferAddressLow</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">Store XY in</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.stringInputBufferAddressLow/High</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">stringInputBufferAddressHigh</span></a><span class="ACME-plain-syntax">                   </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #8                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP13" class="function-link"><span class="ACME-function-syntax">passToCurrentFilingSystem</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">Inform filing system CLI being</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">processed</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">stringInputBufferAddressLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">Check the line is correctly</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">terminated</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charRETURN</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">loop until CR is found</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP5" class="function-link"><span class="ACME-function-syntax">stringOK</span></a><span class="ACME-plain-syntax">                                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">move to next character</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">loop back if less than 256 bytes long</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">string is &gt; 255 characters, so return</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">String is terminated ok - now skip prepended spaces and '*'s</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">stringOK</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $df9e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$FF</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">Y = offset into string (which is</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">about to be incremented so it will</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">start at zero)</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP16" class="function-link"><span class="ACME-function-syntax">incAndSkipSpaces</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">Skip any spaces</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP11" class="function-link"><span class="ACME-function-syntax">exit15</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">if (CR found) then branch (return)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charSTAR</span></a><span class="ACME-plain-syntax">                                      </span><span class="ACME-comment-syntax">check for '*'</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if ('*' found) then branch (Loop</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">back to skip it and skip spaces</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">again)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP16" class="function-link"><span class="ACME-function-syntax">skipSpacesAndCheckForCRInStringInput</span></a><span class="ACME-plain-syntax">           </span><span class="ACME-comment-syntax">doesn't need to move forward, but</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">checks if the current character is CR</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP11" class="function-link"><span class="ACME-function-syntax">exit15</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">if (CR found) then branch (exit)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charBAR</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">check for '|' (a comment)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP11" class="function-link"><span class="ACME-function-syntax">exit15</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">if ('|' found) then branch (exit)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charFORWARDSLASH</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">check for '/'</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP6" class="function-link"><span class="ACME-function-syntax">startLookingForCommand</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">if (NOT forward slash) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">forward</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Move past the '/'</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP10" class="function-link"><span class="ACME-function-syntax">convertStringInputPointerToXY</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">Convert the address</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(.stringInputBufferAddressLow/High +</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">Y) into XY</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #2                                              </span><span class="ACME-comment-syntax">2 = execute "*/" command (See NAUG</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">Section 16.1.7 - FSCV, Page 256-7)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP13" class="function-link"><span class="ACME-function-syntax">passToCurrentFilingSystem</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">ALWAYS branch (call into current</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">filing system service routine)</span>
</pre>
<p class="commentary firstcommentary"><a id="SP6" class="paragraph-anchor"></a><b>&#167;6. Start looking for command. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Look command up in command table</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">startLookingForCommand</span><button class="popup" onclick="togglePopup('usagePopup6')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup6">Usage of <span class="code-font"><span class="ACME-function-syntax">startLookingForCommand</span></span>:<br/><a href="S-s12.html#SP5">&#167;5</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $dfbe</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">currentStringPointer</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">Store offset to start of command in</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">command line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">start of command</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP7" class="function-link"><span class="ACME-function-syntax">lookForCommand</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">ALWAYS branch</span>
</pre>
<p class="commentary firstcommentary"><a id="SP7" class="paragraph-anchor"></a><b>&#167;7. Compare character in A in a star command. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">compareCharacterInCommand</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $dfc4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">starCommandTable</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">compare with character from star</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">command table</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">%11011111</span><span class="ACME-plain-syntax">                                      </span><span class="ACME-comment-syntax">ignore case (zero the bit that</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">distinguishes between upper and</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">lower case)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP7" class="function-link"><span class="ACME-function-syntax">namesDontMatch</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">if (no match) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">increment offset in command line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">test next character</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">atEndOfCommandName</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $dfcd</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP8" class="function-link"><span class="ACME-function-syntax">foundMatchForCommand</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">increment offset in star command</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">table</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">stringInputBufferAddressLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">read next character in command line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s14.html#SP29" class="function-link"><span class="ACME-function-syntax">isLetter</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">carry clear if letter in A</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP7" class="function-link"><span class="ACME-function-syntax">compareCharacterInCommand</span></a><span class="ACME-plain-syntax">                      </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">lookForCommand</span><button class="popup" onclick="togglePopup('usagePopup7')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup7">Usage of <span class="code-font"><span class="ACME-function-syntax">lookForCommand</span></span>:<br/><a href="S-s12.html#SP6">&#167;6</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $dfd7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">starCommandTable</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">read byte from command table</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP8" class="function-link"><span class="ACME-function-syntax">endOfCommandStringFound</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">if (top bit set, i.e. end of command</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">name string) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">stringInputBufferAddressLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">read byte from command line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charDOT</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">check for '.'</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP7" class="function-link"><span class="ACME-function-syntax">foundDot</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (dot character found) then branch</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">namesDontMatch</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $dfe2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">currentStringPointer</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">foundDot</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $dfe6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">starCommandTable</span></a><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">2,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP13" class="function-link"><span class="ACME-function-syntax">passCommandToROMs</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">reached end of table; unrecognised</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">star command</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (top bit clear, i.e. not yet end</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">of command name) then branch back</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(move to next character)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP7" class="function-link"><span class="ACME-function-syntax">atEndOfCommandName</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">ALWAYS branch (loop back)</span>
</pre>
<p class="commentary firstcommentary"><a id="SP8" class="paragraph-anchor"></a><b>&#167;8. endOfCommandStringFound. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">endOfCommandStringFound</span><button class="popup" onclick="togglePopup('usagePopup8')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup8">Usage of <span class="code-font"><span class="ACME-function-syntax">endOfCommandStringFound</span></span>:<br/><a href="S-s12.html#SP7">&#167;7</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $dff2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">foundMatchForCommand</span><button class="popup" onclick="togglePopup('usagePopup9')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup9">Usage of <span class="code-font"><span class="ACME-function-syntax">foundMatchForCommand</span></span>:<br/><a href="S-s12.html#SP7">&#167;7</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $dff4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">push star command address (high byte)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">starCommandTable</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax"> get star command address (low byte)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">push star command address (low byte)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP16" class="function-link"><span class="ACME-function-syntax">skipSpacesAndCheckForCRInStringInput</span></a><span class="ACME-plain-syntax">           </span><span class="ACME-comment-syntax">skip over the following spaces</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">clear carry</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHP</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">push flags</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP9" class="function-link"><span class="ACME-function-syntax">prepareRegistersForStarCommand</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">prepare the A,X,Y registers for the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">call to star command routine</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">the RTI instruction restores the flags, and jumps to the address we've just put on</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">the stack. (i.e. jumps to the star command routine.)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTI</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">jump to star command routine</span>
</pre>
<p class="commentary firstcommentary"><a id="SP9" class="paragraph-anchor"></a><b>&#167;9. prepareRegistersForStarCommand. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">prepareRegistersForStarCommand</span><button class="popup" onclick="togglePopup('usagePopup10')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup10">Usage of <span class="code-font"><span class="ACME-function-syntax">prepareRegistersForStarCommand</span></span>:<br/><a href="S-s12.html#SP8">&#167;8</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e004</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">starCommandTable</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">2,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">Get A parameter from table</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP11" class="function-link"><span class="ACME-function-syntax">exit15</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">if (top bit set, this implies the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">command has no string parameter, but</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">there may be numeric parameters)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then branch (exit, we are done)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">otherwise we set XY to be the rest</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">of the command line (i.e. string</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">based)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">fall through...</span>
</pre>
<p class="commentary firstcommentary"><a id="SP10" class="paragraph-anchor"></a><b>&#167;10. Convert string input pointer to XY. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">       X is the offset into the starCommandTable at the end of the string</span>
<span class="ACME-plain-syntax">       Y is the offset into the string at .stringInputBufferAddressLow/High</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">       XY = (.stringInputBufferAddressLow/High + A)</span>
<span class="ACME-plain-syntax">       A = parameter from star command table</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">convertStringInputPointerToXY</span><button class="popup" onclick="togglePopup('usagePopup11')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup11">Usage of <span class="code-font"><span class="ACME-function-syntax">convertStringInputPointerToXY</span></span>:<br/><a href="S-s12.html#SP5">&#167;5</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e009</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Pass Y line offset to A for later</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">starCommandTable</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">2,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">Get A parameter from table</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">fall through...</span>
</pre>
<p class="commentary firstcommentary"><a id="SP11" class="paragraph-anchor"></a><b>&#167;11. Convert string address to XY. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">       A = is offset into string at .stringInputBufferAddressLow/High</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">       XY = .stringInputBufferAddressLow/High + A</span>
<span class="ACME-plain-syntax">       A = original value of Y on entry</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">convertStringAddressToXY</span><button class="popup" onclick="togglePopup('usagePopup12')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup12">Usage of <span class="code-font"><span class="ACME-function-syntax">convertStringAddressToXY</span></span>:<br/><a href="S-s12.html#SP13">&#167;13</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e00d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">stringInputBufferAddressLow</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">low byte in X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember original Y into A</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">stringInputBufferAddressHigh</span></a><span class="ACME-plain-syntax">                   </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP11" class="function-link"><span class="ACME-function-syntax">exit15</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">} put high byte in Y, increment as</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} needed</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">exit15</span><button class="popup" onclick="togglePopup('usagePopup13')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup13">Usage of <span class="code-font"><span class="ACME-function-syntax">exit15</span></span>:<br/><a href="S-s12.html#SP5">&#167;5</a>, <a href="S-s12.html#SP9">&#167;9</a>, <a href="S-s12.html#SP13">&#167;13</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e017</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP12" class="paragraph-anchor"></a><b>&#167;12. *BASIC. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> This command enters the BASIC language environment. The BASIC ROM is unique among Paged ROMs</span>
<span class="ACME-plain-syntax"> in not having a service entry. If it did, then the *BASIC command could be implemented in</span>
<span class="ACME-plain-syntax"> the BASIC ROM instead of here.</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">basicEntryPoint</span><button class="popup" onclick="togglePopup('usagePopup14')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup14">Usage of <span class="code-font"><span class="ACME-function-syntax">basicEntryPoint</span></span>:<br/><a href="S-s12.html#SP4">&#167;4</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e018</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP14" class="function-link"><span class="ACME-function-syntax">basicROMNumber</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">Get BASIC ROM number</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP13" class="function-link"><span class="ACME-function-syntax">passCommandToROMs</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (no BASIC found) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(pass command on to ROMs)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Set Carry = not entering from RESET</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s10.html#SP30" class="function-link"><span class="ACME-function-syntax">osbyte142EntryPoint</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">Enter language ROM in X</span>
</pre>
<p class="commentary firstcommentary"><a id="SP13" class="paragraph-anchor"></a><b>&#167;13. Pass command to ROMs. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Pass command on to Paged ROMs and to filing system</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">passCommandToROMs</span><button class="popup" onclick="togglePopup('usagePopup15')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup15">Usage of <span class="code-font"><span class="ACME-function-syntax">passCommandToROMs</span></span>:<br/><a href="S-s12.html#SP7">&#167;7</a>, <a href="S-s12.html#SP12">&#167;12</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e021</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">currentStringPointer</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">Restore pointer to start of command</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP7" class="function-link"><span class="ACME-function-syntax">romServiceCallUnrecognisedCommand</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">4 = Unrecognised star command</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s18.html#SP5" class="function-link"><span class="ACME-function-syntax">osbyte143EntryPoint</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">Pass to sideways ROMs</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP11" class="function-link"><span class="ACME-function-syntax">exit15</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">if (claimed by ROM) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(exit)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">currentStringPointer</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">Restore pointer to start of command</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP11" class="function-link"><span class="ACME-function-syntax">convertStringAddressToXY</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">Convert</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.stringInputBufferAddressLow/High+A</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">to XY, ignore returned A</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">3 = Auto-boot call</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">passToCurrentFilingSystem</span><button class="popup" onclick="togglePopup('usagePopup16')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup16">Usage of <span class="code-font"><span class="ACME-function-syntax">passToCurrentFilingSystem</span></span>:<br/><a href="S-s12.html#SP4">&#167;4</a>, <a href="S-s12.html#SP5">&#167;5</a>, <a href="S-s12.html#SP15">&#167;15</a><br/>Chapter 18: Tape and ROM Filing systems - <a href="S-s18.html#SP4">&#167;4</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e031</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> (.</span><a href="S-s2.html#SP13" class="function-link"><span class="ACME-function-syntax">vectorFSCV</span></a><span class="ACME-plain-syntax">)                                   </span><span class="ACME-comment-syntax">call into current filing system</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">handler (for default handler,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">see .</span><a href="S-s18.html#SP8" class="internal">fscEntryPoint</a><span class="ACME-comment-syntax">)</span>
</pre>
<p class="commentary firstcommentary"><a id="SP14" class="paragraph-anchor"></a><b>&#167;14. OSBYTE 139 - Select file options (*OPT). </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> See .</span><a href="S-s18.html#SP36" class="internal">starOptEntryPoint</a><span class="ACME-plain-syntax"> for parameters</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">       X,Y hold the *OPT parameters</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">osbyte139EntryPoint</span><button class="popup" onclick="togglePopup('usagePopup17')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup17">Usage of <span class="code-font"><span class="ACME-function-syntax">osbyte139EntryPoint</span></span>:<br/>Chapter 15: OSBYTE and OSWORD - <a href="S-s15.html#SP1">&#167;1</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e034</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Double A (clear bit zero)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">fall through...</span>
</pre>
<p class="commentary firstcommentary"><a id="SP15" class="paragraph-anchor"></a><b>&#167;15. OSBYTE 127 - Check for EOF on open file. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">       X = file handle</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">osbyte127EntryPoint</span><button class="popup" onclick="togglePopup('usagePopup18')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup18">Usage of <span class="code-font"><span class="ACME-function-syntax">osbyte127EntryPoint</span></span>:<br/>Chapter 15: OSBYTE and OSWORD - <a href="S-s15.html#SP1">&#167;1</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e035</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">A = 1 if entry via OSBYTE 127</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">A = 0 if entry via OSBYTE 139</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP13" class="function-link"><span class="ACME-function-syntax">passToCurrentFilingSystem</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">ALWAYS branch (send *OPT command</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">to the current filing system).</span>
</pre>
<p class="commentary firstcommentary"><a id="SP16" class="paragraph-anchor"></a><b>&#167;16. Skip spaces. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">       .stringInputBufferAddressLow/High is address of string to test</span>
<span class="ACME-plain-syntax">       Y is the current offset within the string</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">       Y is incremented to the next non-space character</span>
<span class="ACME-plain-syntax">       Z set if RETURN found (end of string)</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">incAndSkipSpaces</span><button class="popup" onclick="togglePopup('usagePopup19')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup19">Usage of <span class="code-font"><span class="ACME-function-syntax">incAndSkipSpaces</span></span>:<br/><a href="S-s12.html#SP5">&#167;5</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e039</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">move to next character in string</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">skipSpacesAndCheckForCRInStringInput</span><button class="popup" onclick="togglePopup('usagePopup20')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup20">Usage of <span class="code-font"><span class="ACME-function-syntax">skipSpacesAndCheckForCRInStringInput</span></span>:<br/><a href="S-s12.html#SP5">&#167;5</a>, <a href="S-s12.html#SP8">&#167;8</a>, <a href="S-s12.html#SP17">&#167;17</a>, <a href="S-s12.html#SP18">&#167;18</a><br/>Chapter 14: Star commands - <a href="S-s14.html#SP9">&#167;9</a>, <a href="S-s14.html#SP14">&#167;14</a><br/>Chapter 15: OSBYTE and OSWORD - <a href="S-s15.html#SP62">&#167;62</a>, <a href="S-s15.html#SP63">&#167;63</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e03a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">stringInputBufferAddressLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">read character from string</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charSPACE</span></a><span class="ACME-plain-syntax">                                     </span><span class="ACME-comment-syntax">check for SPACE character</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP16" class="function-link"><span class="ACME-function-syntax">incAndSkipSpaces</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">if (SPACE) then branch (loop back)</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">compareWithReturnAndExit</span><button class="popup" onclick="togglePopup('usagePopup21')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup21">Usage of <span class="code-font"><span class="ACME-function-syntax">compareWithReturnAndExit</span></span>:<br/><a href="S-s12.html#SP17">&#167;17</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e040</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charRETURN</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">set Z flag if charRETURN found</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP17" class="paragraph-anchor"></a><b>&#167;17. Skip spaces and comma. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Skip past any spaces, and check for CR</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">     if carry is clear, then skip SPACEs then look for RETURN</span>
<span class="ACME-plain-syntax">     if carry is set, then skip SPACEs then skip a comma or look for a RETURN</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">       Y incremented past any spaces and comma</span>
<span class="ACME-plain-syntax">       Z set if RETURN found</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">skipSpacesAndComma</span><button class="popup" onclick="togglePopup('usagePopup22')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup22">Usage of <span class="code-font"><span class="ACME-function-syntax">skipSpacesAndComma</span></span>:<br/>Chapter 14: Star commands - <a href="S-s14.html#SP14">&#167;14</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e043</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP16" class="function-link"><span class="ACME-function-syntax">skipSpacesAndCheckForCRInStringInput</span></a><span class="ACME-plain-syntax">           </span><span class="ACME-comment-syntax">if (carry clear) then branch</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">skipSpacesAndCommaValid</span><button class="popup" onclick="togglePopup('usagePopup23')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup23">Usage of <span class="code-font"><span class="ACME-function-syntax">skipSpacesAndCommaValid</span></span>:<br/><a href="S-s12.html#SP21">&#167;21</a><br/>Chapter 14: Star commands - <a href="S-s14.html#SP12">&#167;12</a>, <a href="S-s14.html#SP14">&#167;14</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e045</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP16" class="function-link"><span class="ACME-function-syntax">skipSpacesAndCheckForCRInStringInput</span></a><span class="ACME-plain-syntax">           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charCOMMA</span></a><span class="ACME-plain-syntax">                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP16" class="function-link"><span class="ACME-function-syntax">compareWithReturnAndExit</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">move to next character. Y is not</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">zero so Z is set.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP18" class="paragraph-anchor"></a><b>&#167;18. Read a number (0-255) from string. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">       stringInputBufferAddressLow/High + Y is address of string holding a number</span>
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">       X = result (value 0-255) also stored in .tempWorkspaceE6</span>
<span class="ACME-plain-syntax">       Carry clear on error</span>
<span class="ACME-plain-syntax">       Zero set if RETURN found</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">parseDecimalNumberFromString</span><button class="popup" onclick="togglePopup('usagePopup24')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup24">Usage of <span class="code-font"><span class="ACME-function-syntax">parseDecimalNumberFromString</span></span>:<br/>Chapter 14: Star commands - <a href="S-s14.html#SP12">&#167;12</a>, <a href="S-s14.html#SP13">&#167;13</a>, <a href="S-s14.html#SP14">&#167;14</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e04e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP16" class="function-link"><span class="ACME-function-syntax">skipSpacesAndCheckForCRInStringInput</span></a><span class="ACME-plain-syntax">           </span><span class="ACME-comment-syntax">skip spaces</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP20" class="function-link"><span class="ACME-function-syntax">readDigitFromString</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">read digit</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP21" class="function-link"><span class="ACME-function-syntax">errorReadingString</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">if (error found) then branch (clear</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">carry and exit)</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">readingDigits</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e056</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">tempWorkspaceE6</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">store temporary result</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP20" class="function-link"><span class="ACME-function-syntax">readNextDigitFromString</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">read next digit 0-9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP19" class="function-link"><span class="ACME-function-syntax">finishedParsingDigits</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">if (not a digit) then branch (we</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">have finished)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember best valid result so far</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">tempWorkspaceE6</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">recall previous digit P</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">A=P*2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP21" class="function-link"><span class="ACME-function-syntax">errorReadingString</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">result too big, return with carry</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">clear (error)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">A=P*4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP21" class="function-link"><span class="ACME-function-syntax">errorReadingString</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">result too big, return with carry</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">clear (error)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">tempWorkspaceE6</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">A=(P*4)+P =P*5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP21" class="function-link"><span class="ACME-function-syntax">errorReadingString</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">result too big, return with carry</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">clear (error)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">A=P*10</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP21" class="function-link"><span class="ACME-function-syntax">errorReadingString</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">result too big, return with carry</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">clear (error)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">tempWorkspaceE6</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">Store temporary result</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall current digit</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">tempWorkspaceE6</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">Add previous digit times ten</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP21" class="function-link"><span class="ACME-function-syntax">errorReadingString</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">result too big, return with carry</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">clear (error)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP18" class="function-link"><span class="ACME-function-syntax">readingDigits</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">ALWAYS branch back</span>
</pre>
<p class="commentary firstcommentary"><a id="SP19" class="paragraph-anchor"></a><b>&#167;19. finishedParsingDigits. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">finishedParsingDigits</span><button class="popup" onclick="togglePopup('usagePopup25')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup25">Usage of <span class="code-font"><span class="ACME-function-syntax">finishedParsingDigits</span></span>:<br/><a href="S-s12.html#SP18">&#167;18</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e076</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">tempWorkspaceE6</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">get best valid result</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charRETURN</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">set Z flag if RETURN found</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">set carry (success flag)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP20" class="paragraph-anchor"></a><b>&#167;20. readNextDigitFromString. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">readNextDigitFromString</span><button class="popup" onclick="togglePopup('usagePopup26')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup26">Usage of <span class="code-font"><span class="ACME-function-syntax">readNextDigitFromString</span></span>:<br/><a href="S-s12.html#SP18">&#167;18</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e07c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">readDigitFromString</span><button class="popup" onclick="togglePopup('usagePopup27')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup27">Usage of <span class="code-font"><span class="ACME-function-syntax">readDigitFromString</span></span>:<br/><a href="S-s12.html#SP18">&#167;18</a>, <a href="S-s12.html#SP22">&#167;22</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e07d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s2.html#SP11" class="function-link"><span class="ACME-function-syntax">stringInputBufferAddressLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">get digit from string</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charNINE</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP21" class="function-link"><span class="ACME-function-syntax">errorReadingString</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">} check if digit is in range '0' to</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} '9'</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charZERO</span></a><span class="ACME-plain-syntax">                                      </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP21" class="function-link"><span class="ACME-function-syntax">errorReadingString</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$0F</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">mask off bits to leave binary value</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">0-9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP21" class="paragraph-anchor"></a><b>&#167;21. notAHexByte. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">notAHexByte</span><button class="popup" onclick="togglePopup('usagePopup28')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup28">Usage of <span class="code-font"><span class="ACME-function-syntax">notAHexByte</span></span>:<br/><a href="S-s12.html#SP22">&#167;22</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e08a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP17" class="function-link"><span class="ACME-function-syntax">skipSpacesAndCommaValid</span></a><span class="ACME-plain-syntax">                        </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">errorReadingString</span><button class="popup" onclick="togglePopup('usagePopup29')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup29">Usage of <span class="code-font"><span class="ACME-function-syntax">errorReadingString</span></span>:<br/><a href="S-s12.html#SP18">&#167;18</a>, <a href="S-s12.html#SP20">&#167;20</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e08d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP22" class="paragraph-anchor"></a><b>&#167;22. Read hex digit. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">       on success, carry is set, A = 0-15, based on ascii digit in string (0-9,A-F)</span>
<span class="ACME-plain-syntax">       on error, carry clear</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">readHexDigit</span><button class="popup" onclick="togglePopup('usagePopup30')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup30">Usage of <span class="code-font"><span class="ACME-function-syntax">readHexDigit</span></span>:<br/>Chapter 14: Star commands - <a href="S-s14.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $e08f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP20" class="function-link"><span class="ACME-function-syntax">readDigitFromString</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">read digit 0-9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (digit not in 0-9 range) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">%11011111</span><span class="ACME-plain-syntax">                                      </span><span class="ACME-comment-syntax">clear bit 5 (converts lower case</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">letters to upper case)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charF</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP21" class="function-link"><span class="ACME-function-syntax">notAHexByte</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">if (higher than 'F') then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(exit with error)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charA</span></a><span class="ACME-plain-syntax">                                         </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP21" class="function-link"><span class="ACME-function-syntax">notAHexByte</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">if (lower than 'A') then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(exit with error)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHP</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">carry set, push flags</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charA</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">10</span><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">Convert to range 10-15</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLP</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">restore flags (carry set, for</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">successful result)</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">move on to next byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="S-s11.html">&#10094;</a></li><li class="progresssection"><a href="S-s1.html">1</a></li><li class="progresssection"><a href="S-s2.html">2</a></li><li class="progresssection"><a href="S-s3.html">3</a></li><li class="progresssection"><a href="S-s4.html">4</a></li><li class="progresssection"><a href="S-s5.html">5</a></li><li class="progresssection"><a href="S-s6.html">6</a></li><li class="progresssection"><a href="S-s7.html">7</a></li><li class="progresssection"><a href="S-s8.html">8</a></li><li class="progresssection"><a href="S-s9.html">9</a></li><li class="progresssection"><a href="S-s10.html">10</a></li><li class="progresssection"><a href="S-s11.html">11</a></li><li class="progresscurrent">12</li><li class="progresssection"><a href="S-s13.html">13</a></li><li class="progresssection"><a href="S-s14.html">14</a></li><li class="progresssection"><a href="S-s15.html">15</a></li><li class="progresssection"><a href="S-s16.html">16</a></li><li class="progresssection"><a href="S-s17.html">17</a></li><li class="progresssection"><a href="S-s18.html">18</a></li><li class="progresssection"><a href="S-s19.html">19</a></li><li class="progresssection"><a href="S-s20.html">20</a></li><li class="progresssection"><a href="S-s21.html">21</a></li><li class="progresssection"><a href="S-s22.html">22</a></li><li class="progresssection"><a href="S-s23.html">23</a></li><li class="progresssection"><a href="S-s24.html">24</a></li><li class="progresssection"><a href="S-s25.html">25</a></li><li class="progresssection"><a href="S-s26.html">26</a></li><li class="progressnext"><a href="S-s13.html">&#10095;</a></li></ul></div>
</nav><!--End of weave-->

		</main>
	</body>
</html>

